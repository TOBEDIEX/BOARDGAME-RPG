-- EventTileHandler.client.lua
-- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏µ‡πÄ‡∏ß‡∏ô‡∏ï‡πå‡∏ä‡πà‡∏≠‡∏á‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏ù‡∏±‡πà‡∏á‡πÑ‡∏Ñ‡∏•‡πÄ‡∏≠‡∏ô‡∏ï‡πå (‡πÉ‡∏ä‡πâ UI ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏ä‡πà‡∏≠‡∏á)
-- Version: 4.0.0

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

-- Get local player
local player = Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")

-- Debug mode
local DEBUG_MODE = true

-- Helper function for debug logging
local function debugLog(message)
	print("[EventTileHandler] " .. message) -- ‡πÉ‡∏ä‡πâ print ‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ß‡πà‡∏≤‡πÄ‡∏´‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
end

-- Get remotes
local remotes = ReplicatedStorage:WaitForChild("Remotes")
local eventTileRemotes = remotes:FindFirstChild("EventTileRemotes")
if not eventTileRemotes then
	eventTileRemotes = Instance.new("Folder")
	eventTileRemotes.Name = "EventTileRemotes"
	eventTileRemotes.Parent = remotes
	debugLog("‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå EventTileRemotes")
end

local moneyEventRemote = eventTileRemotes:FindFirstChild("MoneyEvent")
if not moneyEventRemote then
	moneyEventRemote = Instance.new("RemoteEvent")
	moneyEventRemote.Name = "MoneyEvent"
	moneyEventRemote.Parent = eventTileRemotes
	debugLog("‡∏™‡∏£‡πâ‡∏≤‡∏á MoneyEvent RemoteEvent")
end

local uiRemotes = remotes:WaitForChild("UIRemotes")
local statChangedEvent = uiRemotes:FindFirstChild("StatChanged")

-- ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ä‡πà‡∏≠‡∏á‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏≠‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•
local pendingMoneyTile = false
local moneyAmount = 0
local lastTileId = nil
local lastTileType = nil
local isMakingPathChoice = false -- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

-- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ UI MedievalMoneyRandomizer ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
local function findMoneyRandomizerUI()
	debugLog("‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ UI MedievalMoneyRandomizer...")

	-- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÉ‡∏ô PlayerGui ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
	local moneyUI = PlayerGui:FindFirstChild("MedievalMoneyRandomizer")
	if moneyUI then
		debugLog("‚úÖ ‡∏û‡∏ö MedievalMoneyRandomizer ‡πÉ‡∏ô PlayerGui")
		return moneyUI
	end

	-- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÉ‡∏ô‡∏ó‡∏∏‡∏Å ScreenGui ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏π‡∏Å‡∏Ç‡∏≠‡∏á PlayerGui
	for _, gui in pairs(PlayerGui:GetChildren()) do
		if gui:IsA("ScreenGui") then
			moneyUI = gui:FindFirstChild("MedievalMoneyRandomizer")
			if moneyUI then
				debugLog("‚úÖ ‡∏û‡∏ö MedievalMoneyRandomizer ‡πÉ‡∏ô " .. gui.Name)
				return moneyUI
			end

			-- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÉ‡∏ô Frame ‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
			for _, child in pairs(gui:GetDescendants()) do
				if child:IsA("Frame") and child.Name == "MedievalMoneyRandomizer" then
					debugLog("‚úÖ ‡∏û‡∏ö MedievalMoneyRandomizer Frame ‡πÉ‡∏ô " .. gui.Name)
					return child
				end
			end
		end
	end

	debugLog("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö UI MedievalMoneyRandomizer")
	return nil
end

-- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥
local function createNotification(message, duration, color)
	duration = duration or 3
	color = color or Color3.fromRGB(255, 215, 0)

	-- ‡∏™‡∏£‡πâ‡∏≤‡∏á notification ‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
	local notification = Instance.new("Frame")
	notification.Name = "MoneyNotification"
	notification.Size = UDim2.new(0, 280, 0, 60)
	notification.Position = UDim2.new(0.5, 0, 0.1, 0)
	notification.AnchorPoint = Vector2.new(0.5, 0)
	notification.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	notification.BackgroundTransparency = 0.2
	notification.BorderSizePixel = 0

	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(0, 8)
	corner.Parent = notification

	local icon = Instance.new("ImageLabel")
	icon.Name = "Icon"
	icon.Size = UDim2.new(0, 32, 0, 32)
	icon.Position = UDim2.new(0, 14, 0.5, 0)
	icon.AnchorPoint = Vector2.new(0, 0.5)
	icon.BackgroundTransparency = 1
	icon.Image = "rbxassetid://3354536235" -- ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç
	icon.Parent = notification

	local textLabel = Instance.new("TextLabel")
	textLabel.Name = "Message"
	textLabel.Size = UDim2.new(1, -60, 1, 0)
	textLabel.Position = UDim2.new(0, 56, 0, 0)
	textLabel.BackgroundTransparency = 1
	textLabel.Text = message
	textLabel.Font = Enum.Font.GothamSemibold
	textLabel.TextSize = 16
	textLabel.TextColor3 = color
	textLabel.TextXAlignment = Enum.TextXAlignment.Left
	textLabel.TextWrapped = true
	textLabel.Parent = notification

	notification.Parent = PlayerGui

	-- ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏î‡πâ‡∏ß‡∏¢ tween
	notification.Position = UDim2.new(0.5, 0, -0.2, 0)
	TweenService:Create(
		notification,
		TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out),
		{Position = UDim2.new(0.5, 0, 0.05, 0)}
	):Play()

	-- ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î
	task.delay(duration, function()
		TweenService:Create(
			notification,
			TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.In),
			{Position = UDim2.new(0.5, 0, -0.2, 0)}
		):Play()

		task.delay(0.5, function()
			notification:Destroy()
		end)
	end)

	return notification
end

-- ‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢ UI ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
local function showMoneyAnimationWithExistingUI(amount)
	debugLog("üí∞ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: " .. amount)

	-- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ UI ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
	local moneyUI = findMoneyRandomizerUI()

	if not moneyUI then
		debugLog("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö UI ‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏ó‡∏ô")
		createNotification("‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö " .. amount .. " ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç!", 3, Color3.fromRGB(255, 215, 0))

		-- ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
		moneyEventRemote:FireServer("updateMoney", amount)
		return
	end

	-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ MainFrame
	local mainFrame
	if moneyUI:IsA("Frame") then
		mainFrame = moneyUI
		debugLog("‡πÉ‡∏ä‡πâ Frame ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á: " .. moneyUI.Name)
	else
		mainFrame = moneyUI:FindFirstChild("MainFrame")
		if not mainFrame then
			for _, child in pairs(moneyUI:GetDescendants()) do
				if child:IsA("Frame") and (child.Name == "MainFrame" or child.Name:find("Main")) then
					mainFrame = child
					debugLog("‡∏û‡∏ö MainFrame: " .. child.Name)
					break
				end
			end
		end
	end

	if not mainFrame then
		debugLog("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö MainFrame ‡πÉ‡∏ô UI ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏ó‡∏ô")
		createNotification("‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö " .. amount .. " ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç!", 3, Color3.fromRGB(255, 215, 0))

		-- ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
		moneyEventRemote:FireServer("updateMoney", amount)
		return
	end

	-- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ CoinDisplay ‡πÅ‡∏•‡∏∞ CoinAmount
	local coinDisplay = mainFrame:FindFirstChild("CoinDisplay")
	local coinAmount

	if coinDisplay then
		coinAmount = coinDisplay:FindFirstChild("CoinAmount")
		debugLog("‡∏û‡∏ö CoinDisplay ‡πÅ‡∏•‡∏∞ CoinAmount")
	else
		-- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ TextLabel ‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡πá‡∏ô CoinAmount ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
		for _, child in pairs(mainFrame:GetDescendants()) do
			if child:IsA("TextLabel") and (
				child.Name == "CoinAmount" or 
					child.Name:find("Amount") or 
					child.Name:find("Money") or
					child.Name:find("Coin")
				) then
				coinAmount = child
				debugLog("‡∏û‡∏ö CoinAmount: " .. child.Name)
				break
			end
		end
	end

	if not coinAmount then
		debugLog("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö CoinAmount ‡πÉ‡∏ô UI ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏ó‡∏ô")
		createNotification("‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö " .. amount .. " ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç!", 3, Color3.fromRGB(255, 215, 0))

		-- ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
		moneyEventRemote:FireServer("updateMoney", amount)
		return
	end

	-- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏¥‡∏î
	local closeButton
	for _, child in pairs(mainFrame:GetDescendants()) do
		if child:IsA("TextButton") and (
			child.Name:find("Close") or 
				child.Name:find("Accept") or 
				child.Name:find("OK") or
				child.Name:find("Button") or
				child.Name:find("Confirm")
			) then
			closeButton = child
			debugLog("‡∏û‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏¥‡∏î: " .. child.Name)
			break
		end
	end

	-- ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° UI
	moneyUI.Enabled = true
	mainFrame.Visible = true

	-- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤‡πÄ‡∏î‡∏¥‡∏°
	local originalTextSize = coinAmount.TextSize
	local originalText = coinAmount.Text

	-- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
	coinAmount.Text = "0"

	-- ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç
	local coinSound = Instance.new("Sound")
	coinSound.SoundId = "rbxassetid://131323304" -- ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç
	coinSound.Volume = 0.5
	coinSound.Parent = mainFrame
	coinSound:Play()

	-- ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡πà‡∏≤‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡∏•‡∏∞‡∏ô‡∏¥‡∏î
	local countDuration = 2 -- ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ô‡∏±‡∏ö (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)
	local startTime = tick()
	local startValue = 0
	local targetValue = amount

	-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô easing ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô
	local function easeOutQuart(t)
		return 1 - (1 - t)^4
	end

	-- ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡πà‡∏≤‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå
	local countConnection
	countConnection = RunService.RenderStepped:Connect(function()
		local elapsed = tick() - startTime
		local progress = math.min(elapsed / countDuration, 1)

		-- ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ñ‡πà‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏ï‡∏≤‡∏° easing function
		local easedProgress = easeOutQuart(progress)
		local currentValue = math.floor(startValue + easedProgress * (targetValue - startValue))

		-- ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
		coinAmount.Text = tostring(currentValue)

		-- ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô bounce
		if progress >= 1 then
			countConnection:Disconnect()

			-- ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏à‡∏ö
			local finalCoinSound = Instance.new("Sound")
			finalCoinSound.SoundId = "rbxassetid://131323304" -- ‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢
			finalCoinSound.Volume = 0.7
			finalCoinSound.Parent = mainFrame
			finalCoinSound:Play()

			-- ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
			TweenService:Create(
				coinAmount, 
				TweenInfo.new(0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out), 
				{TextSize = originalTextSize * 1.3}
			):Play()

			task.delay(0.3, function()
				TweenService:Create(
					coinAmount, 
					TweenInfo.new(0.2, Enum.EasingStyle.Quad), 
					{TextSize = originalTextSize}
				):Play()
			end)

			-- ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÄ‡∏á‡∏¥‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÅ‡∏™‡∏î‡∏á‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à
			-- ‡πÉ‡∏ä‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
			moneyEventRemote:FireServer("updateMoney", amount)

			-- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏¥‡∏î ‡πÉ‡∏´‡πâ‡∏õ‡∏¥‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
			if not closeButton then
				task.delay(5, function()
					mainFrame.Visible = false
				end)
			end
		end
	end)

	-- ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏°‡∏õ‡∏¥‡∏î ‡πÉ‡∏´‡πâ‡∏õ‡∏¥‡∏î UI ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°
	if closeButton then
		-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
		if not closeButton:GetAttribute("Connected") then
			closeButton.MouseButton1Click:Connect(function()
				mainFrame.Visible = false
			end)
			closeButton:SetAttribute("Connected", true)
		end
	end
end


-- ‡∏™‡∏∏‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô
local function getRandomMoneyAmount()
	local minAmount = 500
	local maxAmount = 2000
	return math.random(minAmount, maxAmount)
end

-- ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÄ‡∏á‡∏¥‡∏ô (‡πÅ‡∏ï‡πà‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°)
moneyEventRemote.OnClientEvent:Connect(function(amount, isEndTile)
	debugLog("üîî ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏≤‡∏Å‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå: " .. tostring(amount))

	-- ‡∏ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏à‡∏≤‡∏Å‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á UI ‡πÄ‡∏á‡∏¥‡∏ô
	if amount and amount > 0 then
		createNotification("‡∏ñ‡∏∂‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß! ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö " .. amount .. " ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç", 3)
		showMoneyAnimationWithExistingUI(amount)
	end
end)

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ñ‡∏∂‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
local function checkEndTile()
	if pendingMoneyTile then
		debugLog("üèÅ ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ñ‡∏∂‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£")
		pendingMoneyTile = false

		-- ‡∏™‡∏∏‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô
		moneyAmount = getRandomMoneyAmount()

		-- ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡∏∞ UI ‡πÄ‡∏á‡∏¥‡∏ô
		createNotification("‡∏ñ‡∏∂‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß! ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö " .. moneyAmount .. " ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç", 3)
		showMoneyAnimationWithExistingUI(moneyAmount)
	end
end

-- ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö PlayerArrivedAtTile (‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á)
local boardRemotes = remotes:WaitForChild("BoardRemotes")
local playerArrivedAtTile = boardRemotes:WaitForChild("PlayerArrivedAtTile")

playerArrivedAtTile.OnClientEvent:Connect(function(playerId, finalTileId)
	-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
	if playerId ~= player.UserId then return end

	debugLog("üèÅ ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏ñ‡∏∂‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á: " .. finalTileId)
	lastTileId = finalTileId

	-- ‡∏ï‡∏±‡πâ‡∏á isMakingPathChoice ‡πÄ‡∏õ‡πá‡∏ô false ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ñ‡∏∂‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß
	isMakingPathChoice = false

	-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
	checkEndTile()
end)

-- ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö ShowPathSelection ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
local showPathSelection = boardRemotes:FindFirstChild("ShowPathSelection")
if showPathSelection then
	showPathSelection.OnClientEvent:Connect(function()
		debugLog("üß≠ ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏∂‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á)")
		isMakingPathChoice = true
	end)
end

-- ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö MovementVisualizationComplete (‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á)
local movementVisualizationComplete = boardRemotes:FindFirstChild("MovementVisualizationComplete")
if movementVisualizationComplete then
	movementVisualizationComplete.OnClientEvent:Connect(function(finalTileId)
		debugLog("üèÅ ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå MovementVisualizationComplete: " .. finalTileId)
		lastTileId = finalTileId

		-- ‡∏ï‡∏±‡πâ‡∏á isMakingPathChoice ‡πÄ‡∏õ‡πá‡∏ô false ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ñ‡∏∂‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß
		isMakingPathChoice = false

		-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
		checkEndTile()
	end)
end

-- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ DiceRollUI.PathSelectionContainer ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á
task.spawn(function()
	local PlayerGui = player:WaitForChild("PlayerGui")
	local PopupUI = PlayerGui:WaitForChild("PopupUI", 10)
	if PopupUI then
		local DiceRollUI = PopupUI:WaitForChild("DiceRollUI", 10)
		if DiceRollUI then
			local PathSelectionContainer = DiceRollUI:WaitForChild("PathSelectionContainer", 10)
			if PathSelectionContainer then
				-- ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠ PathSelectionContainer ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏ã‡πà‡∏≠‡∏ô
				PathSelectionContainer:GetPropertyChangedSignal("Visible"):Connect(function()
					isMakingPathChoice = PathSelectionContainer.Visible
					debugLog("üìç ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á: " .. (isMakingPathChoice and "‡πÄ‡∏õ‡∏¥‡∏î" or "‡∏õ‡∏¥‡∏î"))
				end)
				debugLog("‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö PathSelectionContainer.Visible ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢")
			end
		end
	end
end)

-- ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö TileTriggerEvent ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ
local tileTriggerEvent = boardRemotes:WaitForChild("TileTriggerEvent")

tileTriggerEvent.OnClientEvent:Connect(function(playerId, tileId, tileType)
	-- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á
	if playerId ~= player.UserId then return end

	debugLog("‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ï‡∏Å‡∏ä‡πà‡∏≠‡∏á: ‡∏ä‡πà‡∏≠‡∏á " .. tileId .. " ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó " .. tileType .. 
		(isMakingPathChoice and " (‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á)" or " (‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏Å‡∏ï‡∏¥)"))

	lastTileId = tileId
	lastTileType = tileType

	-- ‡∏ñ‡πâ‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á ‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•
	if isMakingPathChoice then
		debugLog("‚è© ‡∏Ç‡πâ‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á")
		return
	end

	-- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ä‡πà‡∏≠‡∏á‡∏ï‡πà‡∏≤‡∏á‡πÜ
	if tileType == "money" then
		debugLog("‡∏ï‡∏Å‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô ‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• UI ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á")
		createNotification("‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏Å‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô! ‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á", 2, Color3.fromRGB(255, 215, 0))

		-- ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•
		pendingMoneyTile = true
	elseif tileType == "shop" then
		debugLog("‡∏ï‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤")
		createNotification("‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤", 2, Color3.fromRGB(85, 170, 255))
	elseif tileType == "battle" then
		debugLog("‡∏ï‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ")
		createNotification("‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ! ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡πâ‡∏û‡∏£‡πâ‡∏≠‡∏°", 2, Color3.fromRGB(255, 80, 80))
	elseif tileType == "casino" then
		debugLog("‡∏ï‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡∏≤‡∏™‡∏¥‡πÇ‡∏ô")
		createNotification("‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏Ñ‡∏≤‡∏™‡∏¥‡πÇ‡∏ô! ‡∏≠‡∏¢‡∏≤‡∏Å‡∏•‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡πÇ‡∏ä‡∏Ñ‡πÑ‡∏´‡∏°?", 2, Color3.fromRGB(220, 120, 255))
	elseif tileType == "item" then
		debugLog("‡∏ï‡∏Å‡∏ä‡πà‡∏≠‡∏á‡πÑ‡∏≠‡πÄ‡∏ó‡∏°")
		createNotification("‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏Å‡∏ä‡πà‡∏≠‡∏á‡πÑ‡∏≠‡πÄ‡∏ó‡∏°! ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏≠‡πÄ‡∏ó‡∏°...", 2, Color3.fromRGB(100, 255, 100))
	end
end)

-- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å Command Bar
local function testMoneyUI(amount)
	amount = amount or getRandomMoneyAmount()
	debugLog("‡∏ó‡∏î‡∏™‡∏≠‡∏ö UI ‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: " .. amount)
	showMoneyAnimationWithExistingUI(amount)
	return "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏î‡∏™‡∏≠‡∏ö UI ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏à‡∏≥‡∏ô‡∏ß‡∏ô " .. amount .. " ‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç"
end

-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô _G ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å Command Bar
_G.TestMoneyUI = testMoneyUI

-- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏Å‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ñ‡∏∂‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á
_G.TestMoneyTileSequence = function()
	debugLog("‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏Å‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏ñ‡∏∂‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á")

	-- ‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏Å‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô
	pendingMoneyTile = true
	createNotification("‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏Å‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏á‡∏¥‡∏ô! ‡πÄ‡∏á‡∏¥‡∏ô‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ñ‡∏∂‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á", 2, Color3.fromRGB(255, 215, 0))

	-- ‡∏£‡∏≠ 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ñ‡∏∂‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á
	task.delay(2, function()
		debugLog("‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ñ‡∏∂‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á")
		checkEndTile()
	end)
end

-- ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏´‡∏≤ UI MedievalMoneyRandomizer ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
task.spawn(function()
	task.wait(2) -- ‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà‡πÉ‡∏´‡πâ UI ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
	local ui = findMoneyRandomizerUI()
	if ui then
		debugLog("‚úÖ ‡∏û‡∏ö UI MedievalMoneyRandomizer ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏ä‡πâ: " .. ui:GetFullName())
	else
		debugLog("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö UI MedievalMoneyRandomizer ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ä‡∏∑‡πà‡∏≠ UI")
	end
end)

print("[EventTileHandler] ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß")
print("================ ‡∏£‡∏∞‡∏ö‡∏ö‡∏ä‡πà‡∏≠‡∏á‡∏û‡∏¥‡πÄ‡∏®‡∏© (Event Tile) ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß ================")
print("‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏î‡∏™‡∏≠‡∏ö UI ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡∏û‡∏¥‡∏°‡∏û‡πå _G.TestMoneyUI() ‡∏´‡∏£‡∏∑‡∏≠ _G.TestMoneyTileSequence() ‡πÉ‡∏ô‡πÅ‡∏ñ‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á")
